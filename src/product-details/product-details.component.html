<div class="product-details-container">
  <ng-container *ngIf="selectedProduct as product">
    <div class="product-image" *ngIf="product.image?.url; else noImage">
      <img [alt]="product.name || 'Product Image'" [src]="product.image.url" loading="lazy" />
    </div>
    <ng-template #noImage>
      <div class="placeholder-image">No image available</div>
    </ng-template>

    <div class="product-info">
      <h2 class="product-title">{{ product.name }}</h2>
      <p class="product-description">
        {{ product.description }}
      </p>
      <ul class="product-meta">
        <li><strong>Category:</strong> {{ product.category.name || 'Uncategorized' }}</li>
        <li><strong>Status:</strong> {{ product.state || 'Unknown' }}</li>
        <li><strong>Stock:</strong> {{ product.stock || 'Out of Stock' }}</li>
        <li><strong>Price:</strong> ${{ product.price | number: '1.2-2' }}</li>
      </ul>
      <button class="btn primary" [disabled]="!product.stock">Buy Now</button>

      <div class="countdown" *ngIf="countdownText">
        <p>
          Order within
          <span class="countdown-timer">{{ countdownText }}</span> to get it delivered tomorrow!
        </p>
      </div>
    </div>
  </ng-container>
</div>

<div class="similar-items">
  <h3 class="similar-items-title">Similar Items</h3>
  <ng-container *ngIf="categoryProducts.length > 0; else noSimilarItems">
    <ul class="similar-items-list">
      <li *ngFor="let product of categoryProducts" [routerLink]="['/product', product.name]">
        <img [alt]="product.name" [src]="product.image.url || ''" />
        <span class="similar-item-name">{{ product.name }}</span>
      </li>
    </ul>
  </ng-container>
  <ng-template #noSimilarItems>
    <p>No similar items found.</p>
  </ng-template>
</div>
